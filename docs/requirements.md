# 요구사항

## 제품 목표
- 여러 사용자가 하나의 방에 입장하여, 서버 기준 시간으로 동기화된 메트로놈을 함께 재생합니다.
- 방 생성/입장, 템포(BPM)와 박자 변경이 실시간으로 반영됩니다.

## 주요 기능
- 방 생성: 서버 API를 통해 8자리 nanoid가 발급된 방을 생성.
- 방 입장: URL, QR 코드 스캔, 또는 8자리 방 ID 직접 입력으로 `/room/:id` 경로에 진입.
- 실시간 동기화: WebSocket으로 메트로놈 상태(`isPlaying`, `tempo`, `beats`, `startTime`, `serverTime`)를 수신/반영.
- 메트로놈 제어: 시작/정지, BPM 슬라이더(40~240), 박자 드롭다운(2~7) 제공.
- Tab BPM: Tab 버튼을 눌러 원하는 박자로 BPM을 자동 설정 (최근 4번 탭의 평균 간격으로 계산).
- 자연스러운 BPM 변경: BPM 변경 시 박자가 리셋되지 않고 현재 박자 위치를 유지하면서 간격만 조정.
- QR: 방 URL을 QR로 표시 및 스캐너로 읽기(BarcodeDetector 사용, 미지원 시 업로드 폴백 UI 제공).
- 사운드 미리 로딩: 방 입장 시 메트로놈 사운드 파일을 미리 로드하여 즉시 재생 가능.

## 비기능 요구사항
- **브라우저 호환**: 최신 크롬/사파리/모바일 브라우저.
- **성능**: 오디오 스케줄링은 Web Worker로 안정적으로 예약.
- **가용성**: WebSocket 자동 재연결(지수 백오프) 지원.
- **UX/접근성**: 버튼 대비, 포커스 가능한 요소, 반응형 레이아웃.

## 제약/전제
- 서버는 WebSocket 엔드포인트와 REST `POST /room`을 제공합니다.
- 서버가 방송(`metronomeState` 브로드캐스트) 역할을 하며, 클라이언트는 상태를 구독하고 액션을 전송합니다.
